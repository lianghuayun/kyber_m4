ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"reduce.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.montgomery_reduce,"ax",%progbits
  18              		.align	1
  19              		.global	montgomery_reduce
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	montgomery_reduce:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "Core/Src/reduce.c"
   1:Core/Src/reduce.c **** #include "reduce.h"
   2:Core/Src/reduce.c **** #include "params.h"
   3:Core/Src/reduce.c **** 
   4:Core/Src/reduce.c **** 
   5:Core/Src/reduce.c **** static const uint32_t qinv = 7679; // -inverse_mod(q,2^18)
   6:Core/Src/reduce.c **** static const uint32_t rlog = 18;
   7:Core/Src/reduce.c **** 
   8:Core/Src/reduce.c **** /*************************************************
   9:Core/Src/reduce.c **** * Name:        montgomery_reduce
  10:Core/Src/reduce.c **** * 
  11:Core/Src/reduce.c **** * Description: Montgomery reduction; given a 32-bit integer a, computes
  12:Core/Src/reduce.c **** *              16-bit integer congruent to a * R^-1 mod q, 
  13:Core/Src/reduce.c **** *              where R=2^18 (see value of rlog)
  14:Core/Src/reduce.c **** *
  15:Core/Src/reduce.c **** * Arguments:   - uint32_t a: input unsigned integer to be reduced; has to be in {0,...,2281446912}
  16:Core/Src/reduce.c **** *              
  17:Core/Src/reduce.c **** * Returns:     unsigned integer in {0,...,2^13-1} congruent to a * R^-1 modulo q.
  18:Core/Src/reduce.c **** **************************************************/
  19:Core/Src/reduce.c **** uint16_t montgomery_reduce(uint32_t a)
  20:Core/Src/reduce.c **** {
  30              		.loc 1 20 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  21:Core/Src/reduce.c ****   uint32_t u;
  35              		.loc 1 21 3 view .LVU1
  22:Core/Src/reduce.c **** 
  23:Core/Src/reduce.c ****   u = (a * qinv);
ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 2


  36              		.loc 1 23 3 view .LVU2
  37              		.loc 1 23 5 is_stmt 0 view .LVU3
  38 0000 C0EB0013 		rsb	r3, r0, r0, lsl #4
  39 0004 C0EB4323 		rsb	r3, r0, r3, lsl #9
  40              	.LVL1:
  24:Core/Src/reduce.c ****   u &= ((1<<rlog)-1);
  41              		.loc 1 24 3 is_stmt 1 view .LVU4
  42              		.loc 1 24 5 is_stmt 0 view .LVU5
  43 0008 C3F31103 		ubfx	r3, r3, #0, #18
  44              	.LVL2:
  25:Core/Src/reduce.c ****   u *= KYBER_Q;
  45              		.loc 1 25 3 is_stmt 1 view .LVU6
  46              		.loc 1 25 5 is_stmt 0 view .LVU7
  47 000c C3EB0312 		rsb	r2, r3, r3, lsl #4
  48 0010 03EB4223 		add	r3, r3, r2, lsl #9
  49              	.LVL3:
  26:Core/Src/reduce.c ****   a = a + u;
  50              		.loc 1 26 3 is_stmt 1 view .LVU8
  51              		.loc 1 26 5 is_stmt 0 view .LVU9
  52 0014 1844     		add	r0, r0, r3
  53              	.LVL4:
  27:Core/Src/reduce.c ****   return a >> rlog;
  54              		.loc 1 27 3 is_stmt 1 view .LVU10
  28:Core/Src/reduce.c **** }
  55              		.loc 1 28 1 is_stmt 0 view .LVU11
  56 0016 800C     		lsrs	r0, r0, #18
  57              	.LVL5:
  58              		.loc 1 28 1 view .LVU12
  59 0018 7047     		bx	lr
  60              		.cfi_endproc
  61              	.LFE0:
  63              		.section	.text.barrett_reduce,"ax",%progbits
  64              		.align	1
  65              		.global	barrett_reduce
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  69              		.fpu fpv4-sp-d16
  71              	barrett_reduce:
  72              	.LVL6:
  73              	.LFB1:
  29:Core/Src/reduce.c **** 
  30:Core/Src/reduce.c **** 
  31:Core/Src/reduce.c **** /*************************************************
  32:Core/Src/reduce.c **** * Name:        barrett_reduce
  33:Core/Src/reduce.c **** * 
  34:Core/Src/reduce.c **** * Description: Barrett reduction; given a 16-bit integer a, computes
  35:Core/Src/reduce.c **** *              16-bit integer congruent to a mod q in {0,...,11768}
  36:Core/Src/reduce.c **** *
  37:Core/Src/reduce.c **** * Arguments:   - uint16_t a: input unsigned integer to be reduced
  38:Core/Src/reduce.c **** *              
  39:Core/Src/reduce.c **** * Returns:     unsigned integer in {0,...,11768} congruent to a modulo q.
  40:Core/Src/reduce.c **** **************************************************/
  41:Core/Src/reduce.c **** uint16_t barrett_reduce(uint16_t a)
  42:Core/Src/reduce.c **** {
  74              		.loc 1 42 1 is_stmt 1 view -0
  75              		.cfi_startproc
ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 3


  76              		@ args = 0, pretend = 0, frame = 0
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78              		@ link register save eliminated.
  43:Core/Src/reduce.c ****   uint32_t u;
  79              		.loc 1 43 3 view .LVU14
  44:Core/Src/reduce.c **** 
  45:Core/Src/reduce.c ****   u = a >> 13;//((uint32_t) a * sinv) >> 16;
  80              		.loc 1 45 3 view .LVU15
  81              		.loc 1 45 9 is_stmt 0 view .LVU16
  82 0000 430B     		lsrs	r3, r0, #13
  83              	.LVL7:
  46:Core/Src/reduce.c ****   u *= KYBER_Q;
  84              		.loc 1 46 3 is_stmt 1 view .LVU17
  85              		.loc 1 46 5 is_stmt 0 view .LVU18
  86 0002 C3EB0312 		rsb	r2, r3, r3, lsl #4
  87 0006 03EB4223 		add	r3, r3, r2, lsl #9
  88              	.LVL8:
  47:Core/Src/reduce.c ****   a -= u;
  89              		.loc 1 47 3 is_stmt 1 view .LVU19
  90              		.loc 1 47 5 is_stmt 0 view .LVU20
  91 000a C01A     		subs	r0, r0, r3
  92              	.LVL9:
  48:Core/Src/reduce.c ****   return a;
  93              		.loc 1 48 3 is_stmt 1 view .LVU21
  49:Core/Src/reduce.c **** }
  94              		.loc 1 49 1 is_stmt 0 view .LVU22
  95 000c 80B2     		uxth	r0, r0
  96              		.loc 1 49 1 view .LVU23
  97 000e 7047     		bx	lr
  98              		.cfi_endproc
  99              	.LFE1:
 101              		.section	.text.freeze,"ax",%progbits
 102              		.align	1
 103              		.global	freeze
 104              		.syntax unified
 105              		.thumb
 106              		.thumb_func
 107              		.fpu fpv4-sp-d16
 109              	freeze:
 110              	.LVL10:
 111              	.LFB2:
  50:Core/Src/reduce.c **** 
  51:Core/Src/reduce.c **** /*************************************************
  52:Core/Src/reduce.c **** * Name:        freeze
  53:Core/Src/reduce.c **** * 
  54:Core/Src/reduce.c **** * Description: Full reduction; given a 16-bit integer a, computes
  55:Core/Src/reduce.c **** *              unsigned integer a mod q.
  56:Core/Src/reduce.c **** *
  57:Core/Src/reduce.c **** * Arguments:   - uint16_t x: input unsigned integer to be reduced
  58:Core/Src/reduce.c **** *              
  59:Core/Src/reduce.c **** * Returns:     unsigned integer in {0,...,q-1} congruent to a modulo q.
  60:Core/Src/reduce.c **** **************************************************/
  61:Core/Src/reduce.c **** uint16_t freeze(uint16_t x)
  62:Core/Src/reduce.c **** {
 112              		.loc 1 62 1 is_stmt 1 view -0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 4


 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              		.loc 1 62 1 is_stmt 0 view .LVU25
 117 0000 08B5     		push	{r3, lr}
 118              	.LCFI0:
 119              		.cfi_def_cfa_offset 8
 120              		.cfi_offset 3, -8
 121              		.cfi_offset 14, -4
  63:Core/Src/reduce.c ****   uint16_t m,r;
 122              		.loc 1 63 3 is_stmt 1 view .LVU26
  64:Core/Src/reduce.c ****   int16_t c;
 123              		.loc 1 64 3 view .LVU27
  65:Core/Src/reduce.c ****   r = barrett_reduce(x);
 124              		.loc 1 65 3 view .LVU28
 125              		.loc 1 65 7 is_stmt 0 view .LVU29
 126 0002 FFF7FEFF 		bl	barrett_reduce
 127              	.LVL11:
  66:Core/Src/reduce.c **** 
  67:Core/Src/reduce.c ****   m = r - KYBER_Q;
 128              		.loc 1 67 3 is_stmt 1 view .LVU30
 129              		.loc 1 67 5 is_stmt 0 view .LVU31
 130 0006 00F56143 		add	r3, r0, #57600
 131 000a FF33     		adds	r3, r3, #255
 132 000c 99B2     		uxth	r1, r3
 133              	.LVL12:
  68:Core/Src/reduce.c ****   c = m;
 134              		.loc 1 68 3 is_stmt 1 view .LVU32
 135              		.loc 1 68 5 is_stmt 0 view .LVU33
 136 000e 1AB2     		sxth	r2, r3
 137              	.LVL13:
  69:Core/Src/reduce.c ****   c >>= 15; 
 138              		.loc 1 69 3 is_stmt 1 view .LVU34
 139              		.loc 1 69 5 is_stmt 0 view .LVU35
 140 0010 43F3C033 		sbfx	r3, r3, #15, #1
 141              	.LVL14:
  70:Core/Src/reduce.c ****   r = m ^ ((r^m)&c); 
 142              		.loc 1 70 3 is_stmt 1 view .LVU36
 143              		.loc 1 70 17 is_stmt 0 view .LVU37
 144 0014 4840     		eors	r0, r0, r1
 145              	.LVL15:
 146              		.loc 1 70 17 view .LVU38
 147 0016 1840     		ands	r0, r0, r3
 148 0018 00B2     		sxth	r0, r0
 149              		.loc 1 70 9 view .LVU39
 150 001a 5040     		eors	r0, r0, r2
 151              	.LVL16:
  71:Core/Src/reduce.c **** 
  72:Core/Src/reduce.c ****   return r;
 152              		.loc 1 72 3 is_stmt 1 view .LVU40
  73:Core/Src/reduce.c **** }
 153              		.loc 1 73 1 is_stmt 0 view .LVU41
 154 001c 80B2     		uxth	r0, r0
 155              		.loc 1 73 1 view .LVU42
 156 001e 08BD     		pop	{r3, pc}
 157              		.loc 1 73 1 view .LVU43
 158              		.cfi_endproc
 159              	.LFE2:
 161              		.text
ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 5


 162              	.Letext0:
 163              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
 164              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\
ARM GAS  C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 reduce.c
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:18     .text.montgomery_reduce:00000000 $t
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:26     .text.montgomery_reduce:00000000 montgomery_reduce
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:64     .text.barrett_reduce:00000000 $t
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:71     .text.barrett_reduce:00000000 barrett_reduce
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:102    .text.freeze:00000000 $t
C:\Users\11410\AppData\Local\Temp\ccUjSUb9.s:109    .text.freeze:00000000 freeze

NO UNDEFINED SYMBOLS
